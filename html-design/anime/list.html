{% extends "anime/base.html" %}

{% load cache %}

{% load animetemplates %}

{% block title %}{% if link.status %} - {% statusname link.status %} list{% endif %}{% endblock %}

{% block mainlink %}
{% endblock %}

{% block main %}
    <h2 id="listtitle">{% if link.status %}{% statusname link.status %} list{% if link.user %} for {% username link.user %}{% endif %}{% endif %}</h1>
{% cache 0 mainTable cachestr %}
    <div id="dvid">
        <table id="tbl" cellspacing="0" class="tbl">
            <thead class="thdtbl">
                <tr id="wtr">
                    <th class="link" id="link">
                        <a rel="nofollow" href=""></a>
                    </th>
                    <th class="id" id="id">
                        <a rel="nofollow" href="/">â„–</a>
                    </th>
                    <th class="name" id="name">
                        <a rel="nofollow" href="{% if link.user %}/user/{{ link.user }}{% endif %}{% if link.status %}/show/{{ link.status }}{% endif %}/{% if link.order == 'title' or not link.order %}sort/-title/{% endif %}">Name</a>
                    </th>
                    <th class="episodes" id="episodes">
                        <a rel="nofollow" href="{% if link.user %}/user/{{ link.user }}{% endif %}{% if link.status %}/show/{{ link.status }}{% endif %}/sort/{% if link.order == 'episodesCount' %}-{% endif %}episodesCount/">Episodes</a>
                    </th>
                    <th class="release" id="release">
                        <a rel="nofollow" href="{% if link.user %}/user/{{ link.user }}{% endif %}{% if link.status %}/show/{{ link.status }}{% endif %}/sort/{% if link.order == 'releasedAt' %}-{% endif %}releasedAt/">Released</a>
                    </th>
                    <th class="type" id="type">
                        <a rel="nofollow" href="{% if link.user %}/user/{{ link.user }}{% endif %}{% if link.status %}/show/{{ link.status }}{% endif %}/sort/{% if link.order == 'releaseType' %}-{% endif %}releaseType/">Type</a>
                    </th>
                    {% if link.status == 3 %}
                    <th id="rating" class="rating">
                        <a href="#" rel="nofollow">Rated</a>
                    </th>
                    {% endif %}
                </tr>
            </thead>
            <tbody id="tbdid">
                {% for title in list %}
                <tr class="{% if title.air %}air a{% else %}r{% endif %}{{ title.id }}">
                    <td id="link{{ title.id }}" class="link">
                        <a target="_blank" class="cardurl" href="/card/{{ title.id }}/" onclick="return Card.get({{ title.id }}, event);">
                            <img alt="Go" src="/static/arrow.gif">
                        </a>
                    </td>
                    <td onclick="cnt('id', '{{ title.id }}', event);" id="id{{ title.id }}" class="id">{{ forloop.counter0|add:pages.start }}</td>
                    <td onclick="cnt('name', '{{ title.id }}', event);" id="name{{ title.id }}" class="name">{{ title.title }}</td>
                    <td onclick="cnt('episodes', '{{ title.id }}', event);" id="episodes{{ title.id }}" class="episodes">{% if title.count %}{{ title.count }}/{% endif %}{{ title.episodesCount }}</td>
                    <td onclick="cnt('release', '{{ title.id }}', event);" id="release{{ title.id }}" class="release">{{ title.release }}</td>
                    <td onclick="cnt('type', '{{ title.id }}', event);" id="type{{ title.id }}" class="type">{{ title.releaseTypeS }}</td>
                    {% if link.status == 3 %}
                    <td id="rating{{title.id}}" class="rating">{{ title.rating }}</td>
                    {% endif %}
                    {# custom fields #}
                {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>
    <div id="card" class="right"></div>
    {% if pages.items.num_pages > 1 %}
        <div id="pg">
            {% for page in pages.items.get_names %}
                {% ifequal pages.current forloop.counter %}
                    <span id="spanl">[{{ page }}]</span>
                {% else %}
                    <a href="{{ link.link }}{% ifnotequal forloop.counter 1 %}{{forloop.counter}}/{% endifnotequal %}">{{ page }}</a>
                {% endifequal %}
            {% endfor %}
        </div>
    {% endif %}
{% endcache %}
{% endblock %}
